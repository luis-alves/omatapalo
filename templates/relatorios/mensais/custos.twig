{% extends 'layout.twig' %}

{% block content %}

  <table class="table table-striped table-bordered table-hover" cellpadding="0" cellspacing="0" id="myTable" stylse="width:100%;overflow-x:auto">
    <caption style="">
      <div class="centrar_rm">
        <h2 class="colorir">{{title}}</h2>
      </div>
      <h3>
        {{mes_titulo}}
        de
        {{ session.ano }}</h3>
    </caption>
    <div class="container">

      <thead>
        <tr>
          <th class="text-center vam" rowspan="2">MENSAL</th>
          <th class="text-center" colspan="2">MATERIAIS E FERRAMENTAS</th>
          <th class="text-center" colspan="2">MÃO DE OBRA</th>
          <th class="text-center" colspan="2">EQUIPAMENTO E TRANSPORTES</th>
          <th class="text-center" colspan="2">SERVIÇOS</th>
          <th class="text-center" colspan="2">OUTROS CUSTOS</th>
          <th class="text-center vam" rowspan="2">TOTAL</th>
        </tr>
        <tr>
          <th class="text-center">Materiais</th>
          <th class="text-center">Ferramentas</th>
          <th class="text-center">Expatriada</th>
          <th class="text-center">Nacional</th>
          <th class="text-center">Equipamento</th>
          <th class="text-center">Transportes</th>
          <th class="text-center">Internos</th>
          <th class="text-center">Externos</th>
          <th class="text-center">Internos</th>
          <th class="text-center">Externos</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td class="text-center">Arimba</td>
          {% for key, value in arimba_mensal %}
            <td class="text-center">{{ value|number_format(0,","," ") }}</td>
          {% endfor %}
        </tr>
        <tr>
          <td class="text-center">Caraculo</td>
          {% for key, value in caraculo_mensal %}
            <td class="text-center">{{ value|number_format(0,","," ") }}</td>
          {% endfor %}
        </tr>
        <tr>
          <td class="text-center">Cassosso</td>
          {% for key, value in cassosso_mensal %}
            <td class="text-center">{{ value|number_format(0,","," ") }}</td>
          {% endfor %}
        </tr>
      </tbody>
      <tfoot>
        <tr>
          <td class="text-center">
            <strong>Total</strong>
          </td>

          {% for key, value in totalGeral_mensal %}
            <td class="text-center">
              <strong>{{ value|number_format(0,","," ") }}</strong>
            </td>
          {% endfor %}

        </tr>
      </tfoot>
    </table>

    <div id="container">
      <div>
        <h2>
          <span class="label label-primary">Gráfico de
            {{ title }}
            - Mensal</span>
        </h2>
      </div>
      <canvas id="myChart" height="200" width="900"></canvas>
    </div>
  </div>
  <div class="container">
    <table class="table table-striped table-bordered table-hover" cellpadding="0" cellspacing="0" id="myTable">
      <caption style="">
        <h3>Janeiro a
          {{mes_titulo}}
          de
          {{ session.ano }}</h3>
      </caption>
      <thead>
        <tr>
          <th class="text-center vam" rowspan="2">ACUMULADO</th>
          <th class="text-center" colspan="2">MATERIAIS E FERRAMENTAS</th>
          <th class="text-center" colspan="2">MÃO DE OBRA</th>
          <th class="text-center" colspan="2">EQUIPAMENTO E TRANSPORTES</th>
          <th class="text-center" colspan="2">SERVIÇOS</th>
          <th class="text-center" colspan="2">OUTROS CUSTOS</th>
          <th class="text-center vam" rowspan="2">TOTAL</th>
        </tr>
        <tr>
          <th class="text-center">Materiais</th>
          <th class="text-center">Ferramentas</th>
          <th class="text-center">Expatriada</th>
          <th class="text-center">Nacional</th>
          <th class="text-center">Equipamento</th>
          <th class="text-center">Transportes</th>
          <th class="text-center">Internos</th>
          <th class="text-center">Externos</th>
          <th class="text-center">Internos</th>
          <th class="text-center">Externos</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td class="text-center">Arimba</td>
          {% for key, value in arimba_acumulado %}
            <td class="text-center">{{ value|number_format(0,","," ") }}</td>
          {% endfor %}
        </tr>
        <tr>
          <td class="text-center">Caraculo</td>
          {% for key, value in caraculo_acumulado %}
            <td class="text-center">{{ value|number_format(0,","," ") }}</td>
          {% endfor %}
        </tr>
        <tr>
          <td class="text-center">Cassosso</td>
          {% for key, value in cassosso_acumulado %}
            <td class="text-center">{{ value|number_format(0,","," ") }}</td>
          {% endfor %}
        </tr>
      </tbody>
      <tfoot>
        <tr>
          <td class="text-center">
            <strong>Total</strong>
          </td>

          {% for key, value in totalGeral_acumulado %}
            <td class="text-center">
              <strong>{{ value|number_format(0,","," ") }}</strong>
            </td>
          {% endfor %}

        </tr>
      </tfoot>

    </table>
    <div id="container">
      <div>
        <h2>
          <span class="label label-primary">Gráfico de
            {{ title }}
            - Acumulado</span>
        </h2>
      </div>
      <canvas id="myChart2" height="200" width="900"></canvas>
    </div>
    <h6 style="color: blue">NOTA: Clique na legenda para seleccionar dados a apresentar no gráfico.</h6>
  </div>
  <script type="text/javascript">
    var titulo1 = {{ label1|json_encode|raw }}
    var titulo2 = {{ label2|json_encode|raw }}
    var titulo3 = {{ label3|json_encode|raw }}
    var data = {
      labels: [
        "Janeiro",
        "Fevereiro",
        "Março",
        "Abril",
        "Maio",
        "Junho",
        "Julho",
        "Agosto",
        "Setembro",
        "Outubro",
        "Novembro",
        "Dezembro"
      ],
      datasets: [
        {
          label: titulo3,
          backgroundColor: "rgba(244, 66, 107,0.3)",
          borderColor: "rgba(244, 66, 107,1)",
          pointBorderColor: "rgba(244, 66, 107,1)",
          pointBackgroundColor: "#fff",
          pointHoverBackgroundColor: "rgba(244, 66, 107,1)",
          data: {{ cassossoGraficoMensal|json_encode|raw }}
        }, {
          label: titulo1,
          backgroundColor: "rgba(95,186,125,0.5)",
          borderColor: "rgba(95,186,125,1)",
          pointBorderColor: "rgba(95,186,125,1)",
          pointBackgroundColor: "#fff",
          pointHoverBackgroundColor: "rgba(95,186,125,1)",
          data: {{ arimbaGraficoMensal|json_encode|raw }}
        }, {
          label: titulo2,
          backgroundColor: "rgba(166, 134, 244,0.5)",
          borderColor: "rgba(166, 134, 244,1)",
          pointBorderColor: "rgba(166, 134, 244,1)",
          pointBackgroundColor: "#fff",
          pointHoverBackgroundColor: "rgba(166, 134, 244,1)",
          data: {{ caraculoGraficoMensal|json_encode|raw }}
        }

      ]
    }

    //Get context with jQuery - using jQuery's .get() method.
    var ctx = $("#myChart").get(0).getContext("2d");
    new Chart(ctx, {
      type: 'line',
      data: data,
      options: {
        legend: {
          position: 'bottom'
        }
      }
    });
  </script>
  <script type="text/javascript">
    var titulo1 = {{ label1|json_encode|raw }};
    var titulo2 = {{ label2|json_encode|raw }};
    var titulo3 = {{ label3|json_encode|raw }};

    var data = {
      labels: [
        "Janeiro",
        "Fevereiro",
        "Março",
        "Abril",
        "Maio",
        "Junho",
        "Julho",
        "Agosto",
        "Setembro",
        "Outubro",
        "Novembro",
        "Dezembro"
      ],
      datasets: [
        {
          label: titulo3,
          backgroundColor: "rgba(244, 66, 107,0.3)",
          borderColor: "rgba(244, 66, 107,1)",
          pointBorderColor: "rgba(244, 66, 107,1)",
          pointBackgroundColor: "#fff",
          pointHoverBackgroundColor: "rgba(244, 66, 107,1)",
          data: {{ cassossoGraficoAcumulado|json_encode|raw }}
        }, {
          label: titulo1,
          backgroundColor: "rgba(95,186,125,0.5)",
          borderColor: "rgba(95,186,125,1)",
          pointBorderColor: "rgba(95,186,125,1)",
          pointBackgroundColor: "#fff",
          pointHoverBackgroundColor: "rgba(95,186,125,1)",
          data: {{ arimbaGraficoAcumulado|json_encode|raw }}
        }, {
          label: titulo2,
          backgroundColor: "rgba(166, 134, 244,0.5)",
          borderColor: "rgba(166, 134, 244,1)",
          pointBorderColor: "rgba(166, 134, 244,1)",
          pointBackgroundColor: "#fff",
          pointHoverBackgroundColor: "rgba(166, 134, 244,1)",
          data: {{ caraculoGraficoAcumulado|json_encode|raw }}
        }

      ]
    }

    //Get context with jQuery - using jQuery's .get() method.
    var ctx2 = $("#myChart2").get(0).getContext("2d");
    new Chart(ctx2, {
      type: 'line',
      data: data,
      options: {
        legend: {
          position: 'bottom'
        }
      }
    });
  </script>

  <style>
    td,
    th {
      padding-top: 0 !important;
      padding-bottom: 0 !important;
      vertical-align: middle !important;
    }
    @media (max-width:670px) {
      body {
        font-size: 0.9em;
      }
      th {
        padding-left: 0 !important;
        padding-right: 0 !important;
      }
    }
    @media (max-width:1030px) and (min-width:670px) {
      body {
        font-size: 0.9em;
      }
    }

  </style>

{% endblock %}
